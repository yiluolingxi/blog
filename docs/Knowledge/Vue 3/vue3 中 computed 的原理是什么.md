在Vue 3中，`computed`的原理是基于新的`Proxy` API。`computed`属性是一种响应式属性，它会根据其依赖的数据自动进行缓存和更新。

当你在Vue 3中创建一个`computed`属性时，Vue会使用`Proxy`对象来监听该属性的访问。当你读取`computed`属性的值时，会触发`Proxy`的`get`方法。在这个过程中，Vue会检查该`computed`属性是否依赖于其他响应式数据。

如果依赖项发生变化，Vue会跟踪这些变化，并在下次访问该`computed`属性时重新计算其值。这是通过在`Proxy`的`get`方法中建立依赖关系来实现的。

Vue 3使用了惰性求值的方式来处理`computed`属性。这意味着只有在实际访问该属性时，才会执行计算函数来计算属性的值。在计算函数执行后，Vue会将结果进行缓存，以便在下次访问时直接返回缓存的值，而不是重新计算。

Vue 3 中的计算属性还可以使用 `set` 函数来定义一个对应的 `setter`。当你修改计算属性时，`setter` 函数会被调用，你可以在这里执行相应的逻辑。这个特性对于创建可读写的计算属性非常有用。

总结起来，Vue 3中的`computed`属性利用了`Proxy`对象和惰性求值的机制来实现自动的缓存和更新，以提供高效的计算属性功能。


在Vue 3中，`computed`被称为`computed`属性，它使用了`ref`和`reactive`这两个新的响应式API。

`computed`属性的原理可以总结为以下几个步骤：

1.  当你在组件中定义一个`computed`属性时，Vue会将它转换为一个带有`get`和`set`方法的`ref`对象。
2.  在`get`方法中，Vue会跟踪当前依赖于这个`computed`属性的所有响应式数据。如果其中任何一个响应式数据发生变化，Vue将重新计算`computed`属性的值。
3.  当依赖的响应式数据发生变化时，Vue会标记`computed`属性为"dirty"（脏），表示它的值已经过期，需要重新计算。
4.  在下一次访问`computed`属性时，Vue会检查它是否为"dirty"。如果是，Vue会调用`get`方法重新计算`computed`属性的值，并将其缓存起来，供后续访问使用。
5.  如果`computed`属性具有`set`方法，那么当你尝试为这个属性赋值时，`set`方法将被调用。这时，你可以在`set`方法中执行一些逻辑，例如更新其他相关的响应式数据。

Vue 3中的`computed`属性是惰性的，只有在实际访问时才会计算其值。这种惰性计算使得Vue能够更高效地跟踪依赖和减少不必要的计算。

---

- 惰性求值和缓存机制

Vue 3中的惰性求值和缓存机制是相关的，因为这两个机制都是为了提高`computed`属性的性能而设计的。

首先，惰性求值机制能够确保`computed`属性的计算只在需要的时候才进行，这样可以避免不必要的计算，从而提高应用程序的性能。

其次，缓存机制能够将已计算的`computed`属性值存储起来，并在下一次访问该属性时直接返回缓存的值，而不必重新计算。这样可以避免重复计算，提高`computed`属性的性能。

Vue 3通过将这两种机制结合在一起，为开发者提供了高效且易于使用的`computed`属性功能。当`computed`属性依赖的响应式数据发生变化时，Vue会自动进行缓存和更新，确保计算结果的正确性和性能的高效性。



- 